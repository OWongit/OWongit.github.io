<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Owen Wilhere - Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #c0caf5;
            background-color: #1a1b26;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #7aa2f7 0%, #bb9af7 100%);
            color: #ffffff;
            padding: 80px 20px;
            text-align: center;
            margin-bottom: 60px;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .hero .position {
            font-size: 1.5rem;
            margin-bottom: 20px;
            opacity: 0.95;
        }

        .hero .bio {
            font-size: 1.1rem;
            max-width: 700px;
            margin: 0 auto 30px;
            opacity: 0.9;
            line-height: 1.8;
        }

        .hero .contact-info {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            font-size: 1rem;
        }

        .hero .contact-info span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .hero .contact-info a {
            color: #ffffff;
            text-decoration: none;
            opacity: 0.9;
            transition: opacity 0.3s;
        }

        .hero .contact-info a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .hero .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .hero .social-links a {
            color: #ffffff;
            text-decoration: none;
            font-size: 1.1rem;
            padding: 10px 20px;
            border: 2px solid #c0caf5;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .hero .social-links a:hover {
            background-color: #c0caf5;
            color: #1a1b26;
        }

        .hero .pdf-button {
            background-color: #c0caf5;
            color: #1a1b26;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }

        .hero .pdf-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            background-color: #a9b1d6;
        }

        /* Portfolio Section */
        .portfolio {
            padding: 40px 0;
        }

        .portfolio h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 50px;
            color: #c0caf5;
        }

        .project {
            background: #24283b;
            border-radius: 0;
            padding: 40px;
            margin-bottom: 50px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .project-title {
            font-size: 2rem;
            margin-bottom: 5px;
            color: #c0caf5;
        }

        .project-purpose {
            font-size: 0.9rem;
            margin-bottom: 20px;
            color: #a9b1d6;
            font-style: italic;
        }

        .project-description {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #c0caf5;
            line-height: 1.8;
        }

        .project-text-content {
            margin-top: 10px;
            color: #c0caf5;
            line-height: 1.8;
            white-space: pre-line;
        }

        .project-text-content .main-description {
            font-size: 1.1rem;
            color: #c0caf5;
            margin-bottom: 20px;
            font-style: italic;
        }

        .project-text-content .image-list {
            margin-top: 20px;
            margin-bottom: 20px;
            padding-left: 1.5em;
            list-style-type: lower-alpha;
        }

        .project-text-content .image-list li {
            color: #c0caf5;
            font-size: 0.9rem;
            margin-bottom: 10px;
            padding-left: 0.5em;
        }

        .project-text-content .image-list li::marker {
            font-weight: 600;
        }

        .project-text-content ul {
            list-style-position: inside;
            margin-left: 20px;
        }

        .project-text-content li {
            margin-bottom: 8px;
        }

        .project-gallery {
            display: grid;
            gap: 30px;
            align-items: start;
        }

        .project-gallery.grid-1 {
            grid-template-columns: 1fr;
        }

        .project-gallery.grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .project-gallery.grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .project-gallery.grid-4 {
            grid-template-columns: repeat(2, 1fr);
        }

        .project-gallery.grid-5 {
            grid-template-columns: repeat(3, 1fr);
        }

        .project-gallery.grid-5 .project-image-item:nth-child(1),
        .project-gallery.grid-5 .project-image-item:nth-child(2),
        .project-gallery.grid-5 .project-image-item:nth-child(3) {
            grid-column: span 1;
        }

        .project-gallery.grid-5 .project-image-item:nth-child(4) {
            grid-column: 1 / 2;
        }

        .project-gallery.grid-5 .project-image-item:nth-child(5) {
            grid-column: 2 / 3;
        }

        .project-gallery.grid-6 {
            grid-template-columns: repeat(3, 1fr);
        }

        .project-gallery.grid-7 {
            grid-template-columns: repeat(3, 1fr);
        }

        .project-gallery.grid-8 {
            grid-template-columns: repeat(4, 1fr);
        }

        .project-gallery.grid-9 {
            grid-template-columns: repeat(3, 1fr);
        }

        .project-gallery.grid-10 {
            grid-template-columns: repeat(4, 1fr);
        }

        .project-gallery.grid-11 {
            grid-template-columns: repeat(4, 1fr);
        }

        .project-gallery.grid-12 {
            grid-template-columns: repeat(4, 1fr);
        }

        .project-image {
            width: 100%;
            height: auto;
            border-radius: 0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: block;
        }

        .project-image-item {
            margin-bottom: 10px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: stretch;
        }

        .project-image-label {
            position: absolute;
            top: 0px;
            left: 0px;
            background-color: rgba(122, 162, 247, 0.7);
            color: #1a1b26;
            padding: 3px 8px;
            border-radius: 0;
            font-weight: 600;
            font-size: 0.9rem;
            z-index: 10;
        }

        .project-image-item h4 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #c0caf5;
        }

        .project-image-item ul {
            list-style-position: inside;
            color: #a9b1d6;
            line-height: 1.8;
        }

        .project-image-item li {
            margin-bottom: 8px;
        }

        .project-links {
            margin-top: 20px;
        }

        .project-links a {
            display: inline-block;
            color: #7aa2f7;
            text-decoration: none;
            font-weight: 600;
            margin-right: 20px;
            padding: 8px 16px;
            border: 2px solid #7aa2f7;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .project-links a:hover {
            background-color: #7aa2f7;
            color: #1a1b26;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .hero .position {
                font-size: 1.2rem;
            }

            .hero .bio {
                font-size: 1rem;
            }

            .hero .contact-info {
                flex-direction: column;
                gap: 10px;
            }

            .project {
                padding: 20px;
            }

            .project-title {
                font-size: 1.5rem;
            }

            .project-gallery {
                grid-template-columns: 1fr;
            }
        }

        /* PDF Styles */
        @media print {
            body {
                background-color: white;
            }
            
            .hero {
                display: none;
            }
            
            .project {
                page-break-inside: avoid;
                break-inside: avoid;
            }
            
            .project:not(:first-child) {
                page-break-before: always;
                break-before: page;
            }
        }
    </style>
</head>
<body>
    <!-- Hero/Title Section -->
    <section class="hero">
        <div class="container">
            <h1 id="name">Owen Wilhere</h1>
            <p class="position" id="position">Electrical and Computer Engineering Student</p>
            <p class="bio" id="bio">Emerging hardware engineer focused on PCB design and embedded software development.</p>
            
            <div class="contact-info">
                <span id="email">üìß <a href="mailto:owenwilhere@gmail.com">owenwilhere@gmail.com</a></span>
                <span id="phone">üìû <a href="tel:3605843938">(360) 584-3938</a></span>
                <span id="location">üìç Seattle, WA</span>
            </div>
            
            <div class="social-links">
                <a href="https://www.linkedin.com/in/owenwilhere/" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                <a href="https://github.com/OWongit" target="_blank" rel="noopener noreferrer">GitHub</a>
            </div>
            
            <button class="pdf-button" onclick="downloadPDF()">Download Portfolio as PDF</button>
        </div>
    </section>

    <!-- Portfolio Section -->
    <section class="portfolio">
        <div class="container">
            <div id="portfolio-projects">
                <!-- Projects will be dynamically generated here -->
            </div>
        </div>
    </section>

    <script>
        // Calculate grid class based on image count
        function getGridClass(count) {
            if (count <= 10) {
                return `grid-${count}`;
            }
            // For more than 10, use a reasonable default
            if (count <= 12) {
                return 'grid-12';
            }
            return 'grid-3'; // Default to 3 columns for many images
        }

        // Convert number to lowercase letter (1 -> a, 2 -> b, etc.)
        function numberToLetter(num) {
            return String.fromCharCode(96 + num); // 97 is 'a' in ASCII
        }

        // Convert letter to number (a -> 1, b -> 2, etc.)
        function letterToNumber(letter) {
            return letter.charCodeAt(0) - 96;
        }

        // Parse description text file
        function parseDescription(text) {
            const lines = text.split('\n');
            const mainDescription = [];
            const imageSections = [];
            
            let currentImageSection = null;
            
            lines.forEach(line => {
                const trimmedLine = line.trim();
                if (!trimmedLine) return;
                
                // Check if line starts with "Image X:" or "a:", "a.", "b:", "b.", etc.
                const imageMatch = trimmedLine.match(/^Image\s+(\d+):\s*(.*)$/i);
                const letterColonMatch = trimmedLine.match(/^([a-z]):\s*(.*)$/i);
                const letterPeriodMatch = trimmedLine.match(/^([a-z])\.\s*(.*)$/i);
                
                if (imageMatch) {
                    // Old format: "Image X:"
                    if (currentImageSection) {
                        imageSections.push(currentImageSection);
                    }
                    const imageNum = parseInt(imageMatch[1]);
                    currentImageSection = {
                        letter: numberToLetter(imageNum),
                        number: imageNum,
                        description: imageMatch[2] || ''
                    };
                } else if (letterColonMatch) {
                    // Format: "a:", "b:", etc.
                    if (currentImageSection) {
                        imageSections.push(currentImageSection);
                    }
                    const letter = letterColonMatch[1].toLowerCase();
                    currentImageSection = {
                        letter: letter,
                        number: letterToNumber(letter),
                        description: letterColonMatch[2] || ''
                    };
                } else if (letterPeriodMatch) {
                    // Format: "a.", "b.", etc.
                    if (currentImageSection) {
                        imageSections.push(currentImageSection);
                    }
                    const letter = letterPeriodMatch[1].toLowerCase();
                    currentImageSection = {
                        letter: letter,
                        number: letterToNumber(letter),
                        description: letterPeriodMatch[2] || ''
                    };
                } else if (currentImageSection) {
                    // Continue current image section
                    currentImageSection.description += (currentImageSection.description ? ' ' : '') + trimmedLine;
                } else {
                    // Main description text
                    mainDescription.push(trimmedLine);
                }
            });
            
            // Don't forget the last image section
            if (currentImageSection) {
                imageSections.push(currentImageSection);
            }
            
            return {
                mainDescription: mainDescription.join('\n'),
                imageSections: imageSections.sort((a, b) => a.number - b.number)
            };
        }

        // Load project data from folder structure
        async function loadProject(projectData) {
            const projectPath = `projects/${projectData.id}`;
            
            // Load description text file
            let descriptionText = '';
            let parsedDescription = { mainDescription: '', imageSections: [] };
            
            try {
                const response = await fetch(`${projectPath}/description.txt`);
                if (response.ok) {
                    descriptionText = await response.text();
                    parsedDescription = parseDescription(descriptionText);
                }
            } catch (error) {
                console.error(`Error loading description for ${projectData.id}:`, error);
            }

            // Generate image paths - support both new format (images array) and old format (imageCount)
            const images = [];
            if (projectData.images && Array.isArray(projectData.images)) {
                // New format: explicit image filenames
                projectData.images.forEach((imageName, index) => {
                    images.push({
                        src: `${projectPath}/${imageName}`,
                        alt: `${projectData.title} - Image ${index + 1}`
                    });
                });
            } else {
                // Old format: numbered images (backward compatibility)
                const imageCount = projectData.imageCount || 4;
                for (let i = 1; i <= imageCount; i++) {
                    images.push({
                        src: `${projectPath}/image${i}.png`,
                        alt: `${projectData.title} - Image ${i}`
                    });
                }
            }

            return {
                title: projectData.title,
                purpose: projectData.purpose || '',
                mainDescription: parsedDescription.mainDescription,
                imageSections: parsedDescription.imageSections,
                images: images,
                githubLink: projectData.githubLink
            };
        }

        // Render portfolio projects
        async function renderProjects() {
            const container = document.getElementById('portfolio-projects');
            container.innerHTML = '<p>Loading projects...</p>';

            try {
                // Load projects manifest
                const response = await fetch('projects/projects.json');
                if (!response.ok) {
                    throw new Error('Failed to load projects.json');
                }
                
                const projectsManifest = await response.json();
                const projects = await Promise.all(
                    projectsManifest.map(projectData => loadProject(projectData))
                );

                container.innerHTML = '';

                projects.forEach(project => {
                    const projectDiv = document.createElement('div');
                    projectDiv.className = 'project';

                    const imageCount = project.images.length;
                    const gridClass = getGridClass(imageCount);

                    let imagesHTML = '';
                    project.images.forEach((image, index) => {
                        const letter = String.fromCharCode(97 + index); // 97 is 'a' in ASCII
                        imagesHTML += `
                            <div class="project-image-item">
                                <div class="project-image-label">${letter}.</div>
                                <img src="${image.src}" alt="${image.alt}" class="project-image" 
                                     onerror="this.src='https://via.placeholder.com/600x400/cccccc/666666?text=Image+${index + 1}+Not+Found'">
                            </div>
                        `;
                    });

                    // Format description text (displayed after images)
                    let textContentHTML = '';
                    if (project.mainDescription || project.imageSections.length > 0) {
                        textContentHTML = '<div class="project-text-content">';
                        
                        // Main description
                        if (project.mainDescription) {
                            textContentHTML += `<p class="main-description">${project.mainDescription.replace(/\n/g, '<br>')}</p>`;
                        }
                        
                        // Image descriptions as proper list items
                        if (project.imageSections.length > 0) {
                            textContentHTML += '<ol class="image-list" type="a">';
                            project.imageSections.forEach(imgSection => {
                                // Remove the letter prefix if it exists in the description
                                let description = imgSection.description.trim();
                                // Remove patterns like "a. ", "b. " at the start
                                description = description.replace(/^[a-z]\.\s*/i, '');
                                textContentHTML += `<li>${description}</li>`;
                            });
                            textContentHTML += '</ol>';
                        }
                        
                        textContentHTML += '</div>';
                    }

                    let githubLinkHTML = '';
                    // Check if githubLink exists and is not null/empty
                    const hasGithubLink = project.githubLink && 
                                         project.githubLink !== null && 
                                         project.githubLink !== 'null' && 
                                         String(project.githubLink).trim() !== '';
                    if (hasGithubLink) {
                        githubLinkHTML = `
                            <div class="project-links">
                                <a href="${project.githubLink}" target="_blank" rel="noopener noreferrer">View on GitHub</a>
                            </div>
                        `;
                    }

                    let purposeHTML = '';
                    if (project.purpose) {
                        purposeHTML = `<p class="project-purpose">${project.purpose}</p>`;
                    }

                    projectDiv.innerHTML = `
                        <h3 class="project-title">${project.title}</h3>
                        ${purposeHTML}
                        <div class="project-gallery ${gridClass}">
                            ${imagesHTML}
                        </div>
                        ${textContentHTML}
                        ${githubLinkHTML}
                    `;

                    container.appendChild(projectDiv);
                });
            } catch (error) {
                console.error('Error loading projects:', error);
                container.innerHTML = '<p>Error loading projects. Please check that projects/projects.json exists.</p>';
            }
        }

        // PDF Download Functionality
        function downloadPDF() {
            // Create a temporary anchor element to download the PDF file
            const link = document.createElement('a');
            link.href = 'owilhere_portfolio.pdf';
            link.download = 'owilhere_portfolio.pdf';
            
            // Append to body, click, and remove
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            renderProjects();
        });
    </script>
</body>
</html>
